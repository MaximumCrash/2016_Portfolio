function exitCase(){portfolioIsMoving=!1,$(".wrapcase").animate({scrollTop:0}),$(".wrapcase > .header").velocity({opacity:0,top:20},{duration:"fast"}),$(".wrapcase > .content").velocity({marginTop:25,opacity:0},{duration:"fast"}),$(".wrapcase > .subheader").velocity({opacity:0,top:25},{complete:function(){$(".transcircle").velocity({opacity:0},{complete:function(){$(".wrapcase").css({"z-index":"0",opacity:"0"}),$(".transcircle").css({"z-index":"1000",width:"0",height:"100%",margin:"-5px"}),$(".wrapcase > .subheader > .trophycase.righty").empty(),$(".wrapcase > .subheader > .trophycase.lefty").empty(),$(".wrapcase > .content > .row").empty(),$(".wrapcase > .content > p").first().empty(),$(".wrapcase .content p:nth-child(3)").empty(),$(".wrapcase > .content > .gallery-col").empty(),$(".wrapcase > .content > .finalwords > p").empty()}})},duration:"fast"}),$(".wrapcase > .bottom").velocity({opacity:0,bottom:0},{duration:"fast"}),$(".wrapcase > .trophycase").velocity({opacity:0,bottom:0},{duration:"fast"}),$("#extraheader").velocity({top:"25px",opacity:0},{duration:"fast",complete:function(){$(".header > .modalbg").css({top:"0",left:"0",height:"0",width:"0",position:"fixed","z-index":"0"})}}),modalOpen=!1,$(".wrapcase > .bottom").css({"z-index":"3"}),$(".extra > .extraimg").attr("class","extraimg"),$("#extraheader > .extraimg").remove("iframe")}function initCase(e){portfolioIsMoving=!1,currentCase=e,$(".wrapcase").css({opacity:"1","z-index":"1002"}),compileCase(e),$(".wrapcase > .header").velocity({opacity:1,top:0},{complete:function(){$("#extraheader").velocity({top:0,opacity:1},{duration:"slow"}),$(".wrapcase > .content").velocity({marginTop:0,opacity:1},{complete:function(){$(".wrapcase > .trophycase").velocity({opacity:1,bottom:32},{complete:function(){}}),$(".wrapcase > .bottom").velocity({opacity:1,bottom:15})}})}}),$(".wrapcase > .subheader").velocity({opacity:1,top:0})}function switchCase(e){portfolioIsMoving=!1,currentCase=e,$(".wrapcase").css({"z-index":"1001"}),$(".wrapcase > .header").velocity({opacity:0,top:20},{duration:"fast"}),$(".wrapcase > .content").velocity({marginTop:25,opacity:0},{duration:"fast"}),$(".wrapcase > .subheader").velocity({opacity:0,top:25},{complete:function(){$(".wrapcase").animate({scrollTop:0},function(){$(".wrapcase > .header").velocity({opacity:1,top:0},{complete:function(){$("#extraheader").velocity({top:0,opacity:1},{duration:"slow"}),$(".wrapcase > .content").velocity({marginTop:0,opacity:1},{complete:function(){$(".wrapcase > .trophycase").velocity({opacity:1,bottom:32},{complete:function(){}}),$(".wrapcase > .bottom").velocity({opacity:1,bottom:15})}})}}),$(".wrapcase > .subheader").velocity({opacity:1,top:0}),$(".wrapcase > .subheader > .trophycase.righty").empty(),$(".wrapcase > .subheader > .trophycase.lefty").empty(),$(".wrapcase > .content > .row").empty(),$(".wrapcase > .content > p").first().empty(),$(".wrapcase .content p:nth-child(3)").empty(),$(".wrapcase > .content > .gallery-col").empty(),$(".wrapcase > .content > .finalwords > p").empty(),compileCase(e)})},duration:"fast"}),$(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}}),$(".wrapcase > .bottom").velocity({opacity:0,bottom:0},{duration:"fast"}),$(".wrapcase > .trophycase").velocity({opacity:0,bottom:0},{duration:"fast"}),$("#extraheader").velocity({top:"25px",opacity:0},{duration:"fast"}),modalOpen=!1,$(".header > .modalbg").css({top:"0",left:"0",height:"0",width:"0",position:"fixed","z-index":"0"}),$(".wrapcase > .bottom").css({"z-index":"3"}),$(".extra > .extraimg").attr("class","extraimg"),$(".extra > .extraimg").remove("iframe"),$(".extra > .extraimg").removeAttr("style")}function compileCase(e){var t,a,o,i,r,c,s,p=pm.portfolio[e]
t=p.type.split(" "),""!=p.distro&&void 0!=p.distro&&(a=p.distro.split(",")),o=p.title.replace(/\s/g,""),i=o+"icon.svg",r=o+"extra.svg"
for(var l=pm.portfolio.length-1;l>-1;l--)if(p.checkout==pm.portfolio[l].title){s=l
break}switch($(".wrapcase > .header > .gameicon").css({background:"url(/images/"+i+");"}),$(".wrapcase > .header").css({"background-image":"url(/images/header/"+p.header[0]+")","background-repeat":p.header[1],"background-size":p.header[2],"background-position":p.header[3]}),""!=p.youtube&&void 0!=p.youtube?$(".extraimg > .icon").css({opacity:1}):$(".extraimg > .icon").css({opacity:0}),$(".wrapcase > .header > .extra").attr("class","extra"),$(".wrapcase > .subheader").attr("class","subheader"),"mobile"==t[0]?($(".wrapcase > .subheader").attr("class","subheader mobile"),"googleplay"==a[0]?($(".wrapcase > .header > .extra").addClass("mobile-android"),$("#extraheader > .extraimg").velocity({opacity:1})):"appstore"==a[0]&&($(".wrapcase > .header > .extra").addClass("mobile-iphone"),$("#extraheader > .extraimg").velocity({opacity:1})),p.horizontal&&$(".wrapcase > .header > .extra").css({transform:"rotate(90deg)",left:"41%"}),console.log(p.frontcover[0]),$("#extraheader > div").css({"background-image":"url(/images/header/"+p.frontcover[0]+")"})):($(".wrapcase > .subheader").attr("class","subheader"),$("#extraheader > .extraimg").velocity({opacity:0})),$(".wrapcase > .subheader > .title").attr("class","f0 title"),$(".wrapcase > .subheader > .subtitle").attr("class","f1 subtitle"),t[0]){case"games":$(".wrapcase > .subheader > .title").addClass("black"),$(".wrapcase > .subheader > .subtitle").addClass("black"),$(".wrapcase > .subheader").addClass("yellow-bg")
break
case"web":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("blue-bg")
break
case"mobile":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("red-bg")
break
case"design":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("green-bg")
break
case"music":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("purple-bg")}if(void 0!=p.awardwhat)for(var n=0;n<p.awardwhat.length;n++)if(c=p.awardwhere[n].replace(/\s/g,"").toLowerCase()+"trophy.svg",4>n)$(".wrapcase > .subheader > .trophycase.righty").append("<div class='trophy' style='background-image:url(/images/"+c+")'></div>")
else{if(!(8>n))break
$(".wrapcase > .subheader > .trophycase.lefty").append("<div class='trophy' style='background-image:url(/images/"+c+")'></div>")}if($(".wrapcase > .subheader > .title").html(p.title),$(".wrapcase > .subheader > .subtitle").html(p.text),""!=p.distro&&void 0!=p.distro){$(".wrapcase > .content > .row").css({height:"106px"})
for(var d=0;d<a.length&&($(".wrapcase > .content > .row").append("<li style='background:url(/images/"+a[d]+"badge.svg)' onclick=gotoSite("+d+")></li>"),4!=d);d++);}else $(".wrapcase > .content > .row").css({height:"30px"})
void 0!=p.role&&""!=p.role&&$(".wrapcase > .content > p").first().append("<span class='f0'>Role: </span>"+p.role+"<br>"),void 0!=p.released&&""!=p.released&&$(".wrapcase > .content > p").first().append("<span class='f0'>Released: </span>"+p.released+"<br>"),void 0!=p.publisher&&""!=p.publisher&&$(".wrapcase > .content > p").first().append("<span class='f0'>Publisher: </span>"+p.publisher),$(".wrapcase > .content > p").first().append("<br><br>"),$(".wrapcase .content p:nth-child(3)").html(p.about)
if($("iframe").remove(),void 0!=pm.portfolio[e].bandcamp&&""!=pm.portfolio[e].bandcamp&&$(".wrapcase > .content > .gallery-col").before($.parseHTML(pm.portfolio[e].bandcamp)),0!=p.gallery.length)for(var h=0;h<p.gallery.length;h++)$(".wrapcase > .content > .gallery-col").append("<li class='image' style='background:url(/images/"+o+(""+h)+".jpeg)'> </li>"),3==h&&$(".wrapcase > .content > .gallery-col").append("<li class='blurb'> <p class='f1'>"+p.blurb[0]+"</p></li>"),8==h&&$(".wrapcase > .content > .gallery-col").append("<li class='blurb'> <p class='f1'>"+p.blurb[1]+"</p></li>")
$(".wrapcase > .content > .gallery-col").append("<div class='mylogo'> </div> <p class='f0 closure'>“Made with Love”</p>"),void 0!=p.checkout&&""!=p.checkout?$(".wrapcase > .content > .finalwords > p").html("Want more? Check out <a class='f0' href='#' onclick=switchCase("+s+")>"+p.checkout+"</a>"):$(".wrapcase > .content > .finalwords > p").html("<a class='f0' href='#' onclick=exitCase()>Back to Work</a>"),$("#extraheader").hasClass("mobile-iphone")||$("#extraheader").hasClass("mobile-android")?$(".extra > .extraimg").css({width:"78%",height:"78%",translateY:"-50%",translateX:"-50%",marginLeft:"0"}):$("#extraheader > .extraimg").velocity({opacity:0})}function pushPortfolio(e,t){$("#portfolio").append(e)}function compilePortfolio(){for(var e={},t="",a=pm.portfolio.length-1;a>-1;a--){switch(e={type:pm.portfolio[a].type,title:pm.portfolio[a].title,date:pm.portfolio[a].date,text:pm.portfolio[a].text,awardwhere:pm.portfolio[a].awardwhere,awardwhat:pm.portfolio[a].awardwhat},t=pm.portfolio[a].type.split(" "),t[0]){case"games":e.backupColor="yellow-bg"
break
case"web":e.backupColor="blue-bg"
break
case"mobile":e.backupColor="red-bg"
break
case"design":e.backupColor="green-bg"
break
case"music":e.backupColor="purple-bg"}t.length<4?e.identify=t[0]:e.identify="archive",void 0!=pm.portfolio[a].frontcover[0]&&""!=pm.portfolio[a].frontcover[0]&&(e.bg="url(/images/header/"+pm.portfolio[a].frontcover[0]+");",e.bgrepeat=pm.portfolio[a].frontcover[1],e.bgsize=pm.portfolio[a].frontcover[2],e.bgpos=pm.portfolio[a].frontcover[3]),pushPortfolio(handleTemp.portfolio(e),$portfolio)}}function pushAbout(){$("#portfolio").after($.parseHTML(pm.abouthtml))}function switchPage(e,t,a){switch($(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}}),e){case"portfolio":$("#portfolio").css({"overflow-x":"auto"}),$("#portfolio > .wraplab").css({"z-index":"0"}),$("#portfolio > .wraplab").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(1)").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(2)").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(3)").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(4)").velocity({opacity:0}),$("#portfolio > .wraplab > .gridbg").velocity({opacity:0}),$(".piccover").velocity({opacity:0}),$(".secondary").velocity({width:"93px"},{complete:function(){},duration:"fast"}),$(".secondary > ul").velocity({opacity:1,paddingLeft:"0"},{complete:function(){},duration:"fast"}),$(".aboutme").velocity({top:"15px",opacity:0},{duration:"fast",complete:function(){$("#portfolio").css({display:"block"}),$("#portfolio").velocity({opacity:1}),$(".collumn").velocity({marginTop:"0px",opacity:1})}})
break
case"about":$(".secondary").velocity({width:"300px"},{complete:function(){},duration:"fast"}),$(".secondary > ul").velocity({opacity:0,paddingLeft:"50"},{duration:"fast"}),$(".piccover").velocity({opacity:1}),$("#portfolio").velocity({opacity:0},{complete:function(){$("#portfolio").css({display:"none"}),$(".aboutme").velocity({top:"0px",opacity:1})},duration:"fast"}),$(".collumn").velocity({marginTop:"-20px"})
break
case"lab":$("#portfolio").animate({scrollLeft:0}),$(".aboutme").velocity({top:"15px",opacity:0},{duration:"fast"}),$("#portfolio").css({display:"block"}),$("#portfolio").velocity({opacity:1}),$(".secondary").velocity({width:"0px"},{duration:"fast"}),$(".secondary > ul").velocity({opacity:0,paddingLeft:"-50"},{duration:"fast"}),$(".piccover").velocity({opacity:0}),$(".aboutme").velocity({top:"15px",opacity:0},{duration:"fast"}),pageType[previousPage]==pageType[1]?($(".collumn").css({opacity:0}),$("#portfolio").css({"overflow-x":"hidden"}),$("#portfolio > .wraplab").css({"z-index":"1200"}),$("#portfolio > .wraplab").velocity({opacity:1}),$("#portfolio > .wraplab > .labhead > p:nth-child(1)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(2)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(3)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(4)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .grid").velocity({opacity:1,top:0})}})}})}})}}),$("#portfolio > .wraplab > .gridbg").velocity({opacity:.2})):$(".collumn").velocity({marginTop:"-20px",opacity:0},{complete:function(){$("#portfolio").css({"overflow-x":"hidden"}),$("#portfolio > .wraplab").css({"z-index":"1200"}),$("#portfolio > .wraplab").velocity({opacity:1}),$("#portfolio > .wraplab > .labhead > p:nth-child(1)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(2)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(3)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(4)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .grid").velocity({opacity:1,top:0})}})}})}})}}),$("#portfolio > .wraplab > .gridbg").velocity({opacity:.2})}})
break
case"case":$(".transcircle").css({left:a[0],opacity:1}),$(".transcircle").velocity({width:"400%",height:"400%",margin:"-200%",marginTop:"-50%",opacity:1},{complete:function(){initCase(t)}})}}function doneLoading(){compilePortfolio(),pushAbout(),$portfolio.mixItUp(),$portfolio.kinetic({cursor:"grab",y:!1,filterTarget:function(e,t){return $target=$(e),$target.hasClass("frontcover")},moved:function(){portfolioIsMoving=!0},stopped:function(){portfolioIsMoving=!1}}),$(".wraplab").kinetic({cursor:"grab",x:!1,moved:function(){},stopped:function(){}}),portfolioIsMoving&&$(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}}),$(".frontcover").on("click",function(e){$this=$(this),$parent=$this.parent(),which=pm.portfolio.length-$parent.index()
var t=[e.pageX,e.pageY]
portfolioIsMoving||switchPage(pageType[3],which,t),$(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}})}),$(".main > div > a").on("click",function(){$mainLinks.siblings().removeClass().addClass("inactive"),$mainLinks.first().removeClass("inactive").addClass("active"),$mainLinks.first().addClass("blue"),switchPage(pageType[0],0,null)}),$mainLinks.on("click",function(){$this=$(this)
$this.parent()
previousPage=currentPage,currentPage=$this.index()
$this.index()+1
switch($this.siblings().removeClass().addClass("inactive"),$this.removeClass("inactive").addClass("active"),$this.index()){case 0:$this.addClass("blue")
break
case 1:$this.addClass("yellow")
break
case 2:$this.addClass("red")}switchPage(pageType[$this.index()],$this.index(),null),console.log($this.index())}),$portfolio.mousewheel(function(e,t){clearTimeout($.data(this,"scrollTimer")),portfolioIsMoving=!0,$.data(this,"scrollTimer",setTimeout(function(){portfolioIsMoving=!1,console.log("Haven't scrolled in 250ms!")},200)),"lab"!=pageType[currentPage]&&(this.scrollLeft-=50*t),console.log(portfolioIsMoving),e.preventDefault()}),$(".wraplab").mousewheel(function(e,t){this.scrollTop+=50*t,e.preventDefault()}),$(".grid").masonry({itemSelector:".grid-item",columnWidth:200,gutter:20})}function loadLab(){var e=getItems()
$(".grid").masonryImagesReveal(e)}function getItem(e){var t='<div class="grid-item '+pm.lab[e].type+'"><img src="/images/lab'+pm.lab[e].title+"."+pm.lab[e].imagetype+'" /></div>'
return t}function getItems(){for(var e="",t=0;t<pm.lab.length;t++)e+=getItem(t)
return $(e)}function gotoSite(e){var t=pm.portfolio[currentCase].distro.split(",")
"music"==t[e]?$(".wrapcase").animate({scrollTop:$("iframe").offset().top}):window.open(pm.portfolio[currentCase].links[e],"_blank")}var pageType=["portfolio","about","lab","case"],portfolioTitles=[],startPage=0,portfolioIsMoving=!1,pm={},previousPage=0,currentPage=0,currentCase=0,currentpageType=pageType[startPage],handleTemp=Handlebars.templates,modalOpen=!1
$.getJSON("js/ajax/data.json",function(e){pm=e,console.log(pm),doneLoading()}),$(window).bind("load",function(){}),$.fn.masonryImagesReveal=function(e){var t=this.data("masonry"),a=t.options.itemSelector
return e.hide(),this.append(e),e.imagesLoaded().progress(function(e,o){var i=$(o.img).parents(a)
i.show(),t.appended(i)}),this}
var $mainLinks=$(".main > .container > .links > li"),$portfolio=$("#portfolio")
$(".wrapcase > .bottom > .righty").on("click",function(){currentCase>0?currentCase--:currentCase=pm.portfolio.length-1,console.log(currentCase),switchCase(currentCase)}),$(".wrapcase > .bottom > .lefty").on("click",function(){currentCase<pm.portfolio.length-1?currentCase++:currentCase=0,console.log(currentCase),switchCase(currentCase)}),$(document).ready(function(){}),$(".extra > .extraimg").on("click",function(){if(!modalOpen&&(modalOpen=!0,$(".wrapcase > .bottom").css({"z-index":"3000"}),$(".extra > .extraimg").append($.parseHTML(pm.portfolio[currentCase].youtube)),""!=pm.portfolio[currentCase].youtube&&void 0!=pm.portfolio[currentCase].youtube)){var e=$(this)
e.css({position:"fixed","z-index":"1005"}),$(".extra > .extraimg > iframe").velocity({opacity:1}),e.velocity({top:"11%",left:"50.4%",marginLeft:"-403px",translateX:"0%",translateY:"0%",width:"806px",height:"515px"}),e.addClass("modal"),$(".header > .modalbg").css({"z-index":"1004",width:"100%",height:"100%"}),$(".header > .modalbg").velocity({opacity:1})}}),$(".header > .modalbg").on("click",function(){if(modalOpen){modalOpen=!1
var e=$(this)
$(".wrapcase > .bottom").css({"z-index":"3"}),$(".extra > .extraimg").empty("iframe"),e.css({position:"fixed","z-index":"0"}),$(".extra > .extraimg > iframe").css({opacity:0}),$(".extra > .extraimg").attr("class","extraimg"),$(".wrapcase > .subheader").hasClass("mobile")?$(".extra > .extraimg").velocity({width:"78%",height:"78%",top:"48.9%",left:"50.4%",translateY:"-50%",translateX:"-50%",marginLeft:"0"}):$(".extra > .extraimg").velocity({width:"78%",height:"73%",top:"0",left:"0",translateY:"-50%",translateX:"-50%",marginLeft:"0"}),e.velocity({opacity:0},{complete:function(){$(".header > .modalbg").css({height:"0",width:"0"})}})}}),$(".wrapcase > .header > .nav > .backarr").on("click",function(){portfolioIsMoving=!1,exitCase()}),$(".wrapcase").on("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight-40?$(".bottom a").removeClass("black").addClass("white"):$(".bottom a").removeClass("white").addClass("black")}),$("body").on("click",function(e){console.log(e.target)})
