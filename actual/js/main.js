function exitCase(){$("#portfolio").css({display:"block"}),portfolioIsMoving=!1,$(".backwrap").velocity({opacity:0,top:20},{duration:"fast"}),$(".wrapcase > .content").velocity({marginTop:25,opacity:0},{duration:"fast"}),$(".wrapcase > .subheader").velocity({opacity:0,top:25},{complete:function(){$(".transcircle").velocity({opacity:0},{complete:function(){$(".wrapcase").css({"z-index":"0",opacity:"0"}),$(".transcircle").css({"z-index":"1000",width:"0",height:"100%",margin:"-5px"}),$(".wrapcase > .subheader > .trophycase.righty").empty(),$(".wrapcase > .subheader > .trophycase.lefty").empty(),$(".wrapcase > .content > .row").empty(),$(".wrapcase > .content > p").first().empty(),$(".wrapcase .content p:nth-child(3)").empty(),$(".wrapcase > .content > .gallery-col").empty(),$(".wrapcase > .content > .finalwords > p").empty(),$(".backwrap").css({width:"0",height:"0"}),$(".wrapcase").animate({scrollTop:0})}})},duration:"fast"}),$(".wrapcase > .bottom").velocity({opacity:0,bottom:0},{duration:"fast"}),$(".wrapcase > .trophycase").velocity({opacity:0,bottom:0},{duration:"fast"}),$("#extraheader").velocity({top:"25px",opacity:0},{duration:"fast",complete:function(){$(".header > .modalbg").css({top:"0",left:"0",height:"0",width:"0",position:"fixed","z-index":"0"})}}),modalOpen=!1,$(".wrapcase > .bottom").css({"z-index":"3"}),$(".extra > .extraimg").attr("class","extraimg"),$("#extraheader > .extraimg").remove("iframe")}function initCase(a){$(".backwrap").css({width:"100%",height:"69%"}),portfolioIsMoving=!1,currentCase=a,$(".wrapcase").css({opacity:"1","z-index":"1002"}),compileCase(a),$(".wrapcase > .header").velocity({opacity:1,top:0},{duration:"fast"}),$(".backwrap").velocity({opacity:1,top:0},{complete:function(){$("#extraheader").velocity({top:0,opacity:1}),$(".wrapcase > .bottom").velocity({opacity:1,bottom:15})}}),$(".wrapcase > .content").velocity({marginTop:0,opacity:1},{complete:function(){$(".wrapcase > .trophycase").velocity({opacity:1,bottom:32},{complete:function(){}})}}),$(".wrapcase > .subheader").velocity({opacity:1,top:0})}function switchCase(a){portfolioIsMoving=!1,currentCase=a,$(".wrapcase").css({"z-index":"1001"}),$(".backwrap").velocity({opacity:0,top:20},{duration:"fast"}),$(".wrapcase > .content").velocity({marginTop:25,opacity:0},{duration:"fast"}),$(".wrapcase > .subheader").velocity({opacity:0,top:25},{complete:function(){$(".wrapcase").animate({scrollTop:0},function(){$(".wrapcase > .header").velocity({opacity:1,top:0},{complete:function(){$("#extraheader").velocity({top:0,opacity:1})}}),$(".wrapcase > .content").velocity({marginTop:0,opacity:1},{complete:function(){$(".wrapcase > .trophycase").velocity({opacity:1,bottom:32},{complete:function(){}}),$(".wrapcase > .bottom").velocity({opacity:1,bottom:15})}}),$(".wrapcase > .subheader").velocity({opacity:1,top:0}),$(".wrapcase > .subheader > .trophycase.righty").empty(),$(".wrapcase > .subheader > .trophycase.lefty").empty(),$(".wrapcase > .content > .row").empty(),$(".wrapcase > .content > p").first().empty(),$(".wrapcase .content p:nth-child(3)").empty(),$(".wrapcase > .content > .gallery-col").empty(),$(".wrapcase > .content > .finalwords > p").empty(),compileCase(a)})},duration:"fast"}),$(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}}),$(".wrapcase > .bottom").velocity({opacity:0,bottom:0},{duration:"fast"}),$(".wrapcase > .trophycase").velocity({opacity:0,bottom:0},{duration:"fast"}),$("#extraheader").velocity({top:"25px",opacity:0},{duration:"fast"}),modalOpen=!1,$(".header > .modalbg").css({top:"0",left:"0",height:"0",width:"0",position:"fixed","z-index":"0"}),$(".wrapcase > .bottom").css({"z-index":"3"}),$(".extra > .extraimg").attr("class","extraimg"),$(".extra > .extraimg").remove("iframe"),$(".extra > .extraimg").removeAttr("style")}function compileCase(a){var b,c,d,e,f,g,h,i=pm.portfolio[a];b=i.type.split(" "),""!=i.distro&&void 0!=i.distro&&(c=i.distro.split(",")),d=i.title.replace(/\s/g,""),e=d+"icon.svg",f=d+"extra.svg",$("#videoplace > div:nth-child(2)").remove();for(var j=pm.portfolio.length-1;j>-1;j--)if(i.checkout==pm.portfolio[j].title){h=j;break}switch($(".wrapcase > .header > .gameicon").css({background:"url(/images/"+e+");"}),$(".backwrap").css({"background-image":"url(/images/header/"+i.header[0]+")","background-repeat":i.header[1],"background-size":i.header[2],"background-position":i.header[3]}),$(".backwrap").velocity({opacity:1,top:0}),$(".wrapcase > .header > .extra").attr("class","extra"),$(".wrapcase > .subheader").attr("class","subheader"),"mobile"==b[0]?($(".wrapcase > .subheader").attr("class","subheader mobile"),"googleplay"==c[0]?($(".wrapcase > .header > .extra").addClass("mobile-android"),$("#extraheader > .extraimg").velocity({opacity:1})):"appstore"==c[0]&&($(".wrapcase > .header > .extra").addClass("mobile-iphone"),$("#extraheader > .extraimg").velocity({opacity:1})),i.horizontal&&$(".wrapcase > .header > .extra").css({transform:"rotate(90deg)",left:"41%"}),console.log(i.frontcover[0]),$("#extraheader > div").css({"background-image":"url(/images/header/"+i.frontcover[0]+")"})):($(".wrapcase > .subheader").attr("class","subheader"),$("#extraheader > .extraimg").velocity({opacity:0})),$(".wrapcase > .subheader > .title").attr("class","f0 title"),$(".wrapcase > .subheader > .subtitle").attr("class","f1 subtitle"),b[0]){case"games":$(".wrapcase > .subheader > .title").addClass("black"),$(".wrapcase > .subheader > .subtitle").addClass("black"),$(".wrapcase > .subheader").addClass("yellow-bg");break;case"web":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("blue-bg");break;case"mobile":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("red-bg");break;case"design":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("green-bg");break;case"music":$(".wrapcase > .subheader > .title").addClass("white"),$(".wrapcase > .subheader > .subtitle").addClass("white"),$(".wrapcase > .subheader").addClass("purple-bg")}if(void 0!=i.awardwhat)for(var k=0;k<i.awardwhat.length;k++)if(g=i.awardwhere[k].replace(/\s/g,"").toLowerCase()+"trophy.svg",k<4)$(".wrapcase > .subheader > .trophycase.righty").append("<div class='trophy' style='background-image:url(/images/"+g+")'></div>");else{if(!(k<8))break;$(".wrapcase > .subheader > .trophycase.lefty").append("<div class='trophy' style='background-image:url(/images/"+g+")'></div>")}if($(".wrapcase > .subheader > .title").html(i.title),$(".wrapcase > .subheader > .subtitle").html(i.text),""!=i.distro&&void 0!=i.distro){$(".wrapcase > .content > .row").css({height:"106px"});for(var l=0;l<c.length&&($(".wrapcase > .content > .row").append("<li style='background:url(/images/"+c[l]+"badge.svg)' onclick=gotoSite("+l.toString()+")></li>"),4!=l);l++);}else $(".wrapcase > .content > .row").css({height:"30px"});void 0!=i.role&&""!=i.role&&$(".wrapcase > .content > p").first().append("<span class='f0'>Role: </span>"+i.role+"<br>"),void 0!=i.released&&""!=i.released&&$(".wrapcase > .content > p").first().append("<span class='f0'>Released: </span>"+i.released+"<br>"),void 0!=i.publisher&&""!=i.publisher&&$(".wrapcase > .content > p").first().append("<span class='f0'>Publisher: </span>"+i.publisher),$(".wrapcase .content p:nth-child(3)").html(i.about);if($("iframe").remove(),void 0!=pm.portfolio[a].bandcamp&&""!=pm.portfolio[a].bandcamp&&$(".wrapcase > .content > .gallery-col").before($.parseHTML(pm.portfolio[a].bandcamp)),0!=i.gallery.length)for(var n=0,o=0;o<i.gallery.length;o++)$(".wrapcase > .content > .gallery-col").append("<a class='image "+i.gallery[o][1]+"'><img src='/images/gallery/"+i.gallery[o][0]+"'></a>"),"mobile"==i.gallery[o][1]&&n++,n>=3&&($(".wrapcase > .content > .gallery-col").append("<br>"),n=0),3==o&&"mobile"!=i.gallery[o][1]&&i.blurb.length>0&&$(".wrapcase > .content > .gallery-col").append("<li class='blurb'> <p class='f1'>"+i.blurb[0]+"</p></li>"),8==o&&"mobile"!=i.gallery[o][1]&&i.blurb.length>0&&$(".wrapcase > .content > .gallery-col").append("<li class='blurb'> <p class='f1'>"+i.blurb[1]+"</p></li>");$(".wrapcase > .content > .gallery-col").append("<div class='mylogo'> </div> <p class='f0 closure'>Made with Love</p>"),$(".wrapcase > .content > .finalwords > p").html(void 0!=i.checkout&&""!=i.checkout?"Want more? Check out <a class='f0' href='#' onclick=switchCase("+h+")>"+i.checkout+"</a>":"<a class='f0' href='#' onclick=exitCase()>Back to Work</a>"),""!=i.youtube&&void 0!=i.youtube?($(".extraimg > .icon").css({opacity:1}),$("#videoplace").append($.parseHTML(i.youtube))):$(".extraimg > .icon").css({opacity:0}),$("#extraheader").hasClass("mobile-iphone")?$(".extra > .extraimg").css({width:"79%",height:"73%",translateY:"-50%",translateX:"-50%",marginLeft:"0"}):$("#extraheader").hasClass("mobile-android")?$(".extra > .extraimg").css({width:"80%",height:"77%",translateY:"-50%",translateX:"-50%",marginLeft:"0"}):$("#extraheader > .extraimg").velocity({opacity:0})}function pushPortfolio(a){$("#portfolio").append(a)}function compilePortfolio(){for(var a={},b="",c=pm.portfolio.length-1;c>-1;c--){switch(a={type:pm.portfolio[c].type,title:pm.portfolio[c].title,date:pm.portfolio[c].date,text:pm.portfolio[c].text,awardwhere:pm.portfolio[c].awardwhere,awardwhat:pm.portfolio[c].awardwhat},b=pm.portfolio[c].type.split(" "),b[0]){case"games":a.backupColor="yellow-bg";break;case"web":a.backupColor="blue-bg";break;case"mobile":a.backupColor="red-bg";break;case"design":a.backupColor="green-bg";break;case"music":a.backupColor="purple-bg"}a.identify=b.length<4?b[0]:"archive",void 0!=pm.portfolio[c].frontcover[0]&&""!=pm.portfolio[c].frontcover[0]&&(a.bg="url(/images/header/"+pm.portfolio[c].frontcover[0]+");",a.bgrepeat=pm.portfolio[c].frontcover[1],a.bgsize=pm.portfolio[c].frontcover[2],a.bgpos=pm.portfolio[c].frontcover[3]),pushPortfolio(handleTemp.portfolio(a),$portfolio)}}function pushAbout(){$("#portfolio").after($.parseHTML(pm.abouthtml))}function switchPage(a,b,c){switch($(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}}),a){case"portfolio":$("#portfolio").css({"overflow-x":"auto"}),$("#portfolio > .wraplab").css({"z-index":"0"}),$("#portfolio > .wraplab").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(1)").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(2)").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(3)").velocity({opacity:0}),$("#portfolio > .wraplab > .labhead > p:nth-child(4)").velocity({opacity:0}),$("#portfolio > .wraplab > .gridbg").velocity({opacity:0}),$(".piccover").velocity({opacity:0}),$(".secondary").velocity({width:"93px"},{complete:function(){},duration:"fast"}),$(".secondary > ul").velocity({opacity:1,paddingLeft:"0"},{complete:function(){},duration:"fast"}),$(".aboutme").velocity({top:"15px",opacity:0},{duration:"fast",complete:function(){$("#portfolio").css({display:"block"}),$("#portfolio").velocity({opacity:1}),$(".collumn").velocity({marginTop:"0px",opacity:1})}});break;case"about":$(".secondary").velocity({width:"300px"},{complete:function(){},duration:"fast"}),$(".secondary > ul").velocity({opacity:0,paddingLeft:"50"},{duration:"fast"}),$(".piccover").velocity({opacity:1}),$("#portfolio").velocity({opacity:0},{complete:function(){$("#portfolio").css({display:"none"}),$(".aboutme").velocity({top:"0px",opacity:1})},duration:"fast"}),$(".collumn").velocity({marginTop:"-20px"});break;case"lab":$("#portfolio").animate({scrollLeft:0}),$(".aboutme").velocity({top:"15px",opacity:0},{duration:"fast"}),$("#portfolio").css({display:"block"}),$("#portfolio").velocity({opacity:1}),$(".secondary").velocity({width:"0px"},{duration:"fast"}),$(".secondary > ul").velocity({opacity:0,paddingLeft:"-50"},{duration:"fast"}),$(".piccover").velocity({opacity:0}),$(".aboutme").velocity({top:"15px",opacity:0},{duration:"fast"}),pageType[previousPage]==pageType[1]?($(".collumn").css({opacity:0}),$("#portfolio").css({"overflow-x":"hidden"}),$("#portfolio > .wraplab").css({"z-index":"1200"}),$("#portfolio > .wraplab").velocity({opacity:1}),$("#portfolio > .wraplab > .labhead > p:nth-child(1)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(2)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(3)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(4)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .grid").velocity({opacity:1,top:0})}})}})}})}}),$("#portfolio > .wraplab > .gridbg").velocity({opacity:.2})):$(".collumn").velocity({marginTop:"-20px",opacity:0},{complete:function(){$("#portfolio").css({"overflow-x":"hidden"}),$("#portfolio > .wraplab").css({"z-index":"1200"}),$("#portfolio > .wraplab").velocity({opacity:1}),$("#portfolio > .wraplab > .labhead > p:nth-child(1)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(2)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(3)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .labhead > p:nth-child(4)").velocity({opacity:1,top:0},{complete:function(){$("#portfolio > .wraplab > .grid").velocity({opacity:1,top:0})}})}})}})}}),$("#portfolio > .wraplab > .gridbg").velocity({opacity:.2})}});break;case"case":$(".transcircle").css({left:c[0],opacity:1}),$(".transcircle").velocity({width:"400%",height:"400%",margin:"-200%",marginTop:"-50%",opacity:1},{complete:function(){initCase(b),$("#portfolio").css({display:"none"})}})}}function doneLoading(){compilePortfolio(),pushAbout(),$portfolio.mixItUp(),$portfolio.kinetic({cursor:"grab",slowdown:.85,y:!1,filterTarget:function(a){return $target=$(a),$target.hasClass("frontcover")},moved:function(){portfolioIsMoving=!0},stopped:function(){portfolioIsMoving=!1}}),$(".wraplab").kinetic({cursor:"grab",x:!1,moved:function(){},stopped:function(){}}),portfolioIsMoving&&$(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}}),$(".frontcover").on("click",function(a){$this=$(this),$parent=$this.parent(),which=pm.portfolio.length-$parent.index();var b=[a.pageX,a.pageY];portfolioIsMoving||switchPage(pageType[3],which,b),$(".dragattention").velocity({opacity:0},{complete:function(){$(".dragattention").remove()}})}),$(".main > div > a").on("click",function(){$mainLinks.siblings().removeClass().addClass("inactive"),$mainLinks.first().removeClass("inactive").addClass("active"),$mainLinks.first().addClass("blue"),switchPage(pageType[0],0,null)}),$mainLinks.on("click",function(){$this=$(this);$this.parent();previousPage=currentPage,currentPage=$this.index();$this.index()+1;switch($this.siblings().removeClass().addClass("inactive"),$this.removeClass("inactive").addClass("active"),$this.index()){case 0:$this.addClass("blue");break;case 1:$this.addClass("yellow");break;case 2:$this.addClass("red")}switchPage(pageType[$this.index()],$this.index(),null),console.log($this.index())}),$portfolio.mousewheel(function(a,b){clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){portfolioIsMoving=!1,console.log("Haven't scrolled in 250ms!")},200)),"lab"!=pageType[currentPage]&&(this.scrollLeft-=50*b),console.log(portfolioIsMoving),a.preventDefault()}),$(".wraplab").mousewheel(function(a,b){this.scrollTop+=50*b,a.preventDefault()}),$(".grid").masonry({itemSelector:".grid-item",columnWidth:200,gutter:20})}function loadLab(){var a=getItems();$(".grid").masonryImagesReveal(a)}function getItem(a){var b='<div class="grid-item '+pm.lab[a].type+'"><img src="/images/lab'+pm.lab[a].title+"."+pm.lab[a].imagetype+'" /></div>';return b}function getItems(){for(var a="",b=0;b<pm.lab.length;b++)a+=getItem(b);return $(a)}function gotoSite(a){var b=pm.portfolio[currentCase].distro.split(",");"music"==b[a]?$(".wrapcase").animate({scrollTop:$("iframe").offset().top}):window.open(pm.portfolio[currentCase].links[a],"_blank")}var pageType=["portfolio","about","lab","case"],portfolioTitles=[],startPage=0,portfolioIsMoving=!1,pm={},previousPage=0,currentPage=0,currentCase=0,currentpageType=pageType[startPage],handleTemp=Handlebars.templates,modalOpen=!1;$.getJSON("js/ajax/data.json",function(a){pm=a,console.log(pm),doneLoading()}),$(window).bind("load",function(){}),$.fn.masonryImagesReveal=function(a){var b=this.data("masonry"),c=b.options.itemSelector;return a.hide(),this.append(a),a.imagesLoaded().progress(function(a,d){var e=$(d.img).parents(c);e.show(),b.appended(e)}),this};var $mainLinks=$(".main > .container > .links > li"),$portfolio=$("#portfolio");$(".wrapcase > .bottom > .righty").on("click",function(){currentCase>0?currentCase--:currentCase=pm.portfolio.length-1,console.log(currentCase),switchCase(currentCase)}),$(".wrapcase > .bottom > .lefty").on("click",function(){currentCase<pm.portfolio.length-1?currentCase++:currentCase=0,console.log(currentCase),switchCase(currentCase)}),$(document).ready(function(){}),$("#extraheader > .extraimg > .icon").on("click",function(){modalOpen||($("#videoplace > iframe").css({display:"block"}),$("#videoplace").fitVids(),$(".wrapcase > .modalbg").css({height:"100%",width:"100%"}),$("#videoplace").css({width:"64%",height:"64%"}),$(".wrapcase > .modalbg").velocity({opacity:.7},{duration:"fast"}),$("#videoplace").velocity({opacity:1,top:"50%"},{duration:"fast"}),modalOpen=!0)}),$(".wrapcase > .modalbg").on("click",function(){modalOpen&&($(".wrapcase > .modalbg").velocity({opacity:0},{complete:function(){$(".wrapcase > .modalbg").css({height:"0",width:"0"})}}),$("#videoplace").velocity({opacity:0,top:"51%"},{complete:function(){$("#videoplace").css({width:"0",height:"0"}),$("#videoplace > iframe").css({display:"block"})}}),modalOpen=!1)}),$("#videoplace > .closeme.icon").on("click",function(){modalOpen&&($(".wrapcase > .modalbg").velocity({opacity:0},{duration:"fast",complete:function(){$(".wrapcase > .modalbg").css({height:"0",width:"0"})}}),$("#videoplace").velocity({opacity:0,top:"51%"},{duration:"fast",complete:function(){$("#videoplace").css({width:"0",height:"0"}),$("#videoplace > iframe").css({display:"none"})}}),modalOpen=!1)}),$(".wrapcase > .header > .nav > .backarr").on("click",function(){portfolioIsMoving=!1,exitCase()}),$(".wrapcase").on("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight-40?$(".bottom a").removeClass("black").addClass("white"):$(".bottom a").removeClass("white").addClass("black")}),$("body").on("click",function(a){console.log(a.target)});
